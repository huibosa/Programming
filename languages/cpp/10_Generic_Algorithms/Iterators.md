## Insert Iterators

```cpp
// it is an inserter generated by inserter
*it = val;
// behave as
it = c.insert(it, val);     // it points to the newly added element
++it;   // increment it so that it denotes the same element as before
```

------------------------------------------------------------------------------

```cpp
list<int> lst = {1,2,3,4};
list<int> lst2;
list<int> lst3;
// after copy completes, lst2 contains 4 3 2 1
copy(lst.cbegin(), lst2.cbegin(), front_inserter(lst2));
// after copy completes, lst2 contains 1 2 3 4
copy(lst.cbegin(), lst2.cend(), inserter(lst3, lst3.begin()));
```

## `iostream` Iterators

```cpp
istream_iterator<int> int_it(cin);      // reads from cin
istream_iterator<int> int_eof;          // end iterator value
ifstream in("afile");
istream_iterator<string> str_in(in);    // reads string from "afile"
```

```cpp
istream_iterator<int> in_iter(cin);     // read ints from cin
istream_iterator<int> eof;              // istream "end" iterator

while (in_iter != eof) {        // while there's valid input to read
    // postfix increment reads the stream and returns the old value of the iterator
    // we dereference that iterator to get the previous value read from the stream
    vec.push_back(*in_iter++);
}

// or rewrite as
istream_iterator<int> in_iter(cin), eof;    // read ints from cin
vector<int> vec(in_iter, eof);              // construct vec from an iterator range
```

```cpp
copy(vec.begin(), vec.end(), out_iter);
cout << endl;
```

### Using Stream Iterators with the Algorithms

```cpp
istream_iterator<int> in(cin), eof;
cout << accumulate(in, eof, 0) << endl;
```

### Operations on `ostream_iterator`s

```cpp
ostream_iterator<int> out_iter(cout, " ");
for (auto e : vec) {
    *out_iter++ = e;        // the assignment writes this element to cout
}
cout << endl;

// we can omit the dereference and increment when assign to out_iter
for (auto e : vec) {
    out_iter = e;
}

// print the element in vec
copy(vec.begin(), vec.end(), out_iter);
cout << endl;
```

### Using Stream Iterators with Class Types

```cpp
istream_iterator<Sales_item> item_iter(cin), eof;
ostream_iterator<Sales_item> out_iter(cout, "\n");
// store the first transaction
Sales_item sum = *item_iter++;
while (item_iter != eof) {
    // if the current transaction (which is stored in item_iter) has the same ISBN
    if (item_iter->isbn() == sum->isbn()) {
        sum += *item_iter++;    // add it to sum and read the next transaction
    }
    else {
        out_iter = sum;     // write the current sum
        sum = *item_iter++; // read the next transaction
    }
}
out_iter = sum;     // print the las set of codes
```

## Reverse Iterators

```cpp
vector<int> vec = {0,1,2,3,4,5,6,7,8,9};
// reverse iterator of vector from back to front
for (auto r_iter = vec.crbegin(); r_iter != vec.crend(); ++r_iter) {
    cout << *r_iter << endl;
}

sort(vec.begin(), vec.end());   // sort vec in normal order
// sorts in reverse: puts the samllest element at the end of vec
sort(vec.cbegin(), vec.cend());
```

### Relationship between Reverse Iterators and Other Iterators

```cpp
// find the first element in a comma-separated list
auto comma = find(line.cbegin(), line.cend(), ',');
cout << string(line.cbegin(), comma) << endl;

// find the last element in a comma-separated list
auto rcomma = find(line.crbegin(), line.crend(), ',');
// WRONG: will generate the word in reverse order
cout << string(line.crbegin(), rcomma) << endl;
// ok: get a forward iterator and read to the end of line
cout << string(rcomma.base(), line.cend()) << endl;
```

```
[line.crbegin(), comma) and [rcomma.base(), line.end())
refer to the same elements in line
```
